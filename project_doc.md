# AI‑платформа для генерации образовательных курсов: бизнес-план и MVP

## 1. Продуктовое видение (Product Vision)

* **Цель проекта:** Автоматизировать и удешевить создание образовательных курсов. Платформа решает проблему длительной и дорогой разработки учебного контента вручную. Вместо того чтобы тратить месяцы труда экспертов на написание уроков, нейросеть способна сгенерировать структуру и материалы курса за считанные дни. В результате средняя стоимость разработки e-learning контента уже снизилась с \~\$15 000 до \~\$8 500 благодаря использованию ИИ. Проект призван сделать создание качественного учебного материала **быстрым, массовым и доступным**.

* **Целевая аудитория:**

  * *Студенты и самообразующиеся люди* – смогут по запросу получать интерактивные курсы на любую тему для самостоятельного изучения.
  * *Образовательные организации и школы* – смогут быстро создавать учебные программы и курсы без найма методистов.
  * *HR-отделы компаний* – для генерации внутренних тренингов и onboarding-курсов для сотрудников.
  * *Частные эксперты и коучи* – смогут генерировать основу курсов на базе своего наброска идей и экономить время на подготовке материалов.

* **Уникальное торговое преимущество (USP):** Полностью автоматизированная платформа, способная **генерировать структурированный курс “под ключ”** – от оглавления до уроков и тестов – на основе запроса пользователя. Конкурирующие решения требуют значительного участия человека или ориентированы только на англоязычный рынок. Наш сервис будет сфокусирован на **русскоязычном рынке**, интегрирован с локальными сервисами (ЮKassa, ВКонтакте и пр.) и позволит получать готовые курсы буквально **в режиме реального времени**. В отличие от просто использования ChatGPT в ручном режиме, платформа обеспечивает структурирование материала, интерактивность (тесты, прогресс) и удобство обучения без необходимости самому придумывать последовательность уроков. Интеграция ИИ непосредственно в образовательный процесс – наше ключевое преимущество, благодаря которому обучение становится проще и доступнее.


## 2. Структура продукта и UX-потоки

**Структура курсов:** Платформа придерживается многоуровневой структуры обучения:

* **Курс** – объединяет в себе определённую тему (например, “Основы Python”). У курса есть описание, цели обучения, уровень (начальный/продвинутый) и автор (пользователь-создатель). Курс делится на несколько модулей.
* **Модуль** – логический раздел внутри курса, группирующий связанные темы. Например, в курсе по Python могут быть модули “Синтаксис языка”, “Работа с данными”, “ООП в Python” и т.д. Модуль содержит набор глав.
* **Глава (урок)** – основная единица теоретического материала. Глава включает текстовую теорию, примеры, возможно списки или таблицы для структурирования знаний. Размер главы – оптимальный для самостоятельного изучения за один раз (например, 5–15 минут чтения). После каждой главы следуют задания/тесты.
* **Задания (тесты)** – проверочные элементы, идущие после главы или модуля. В MVP это тестовые вопросы (множественный или одиночный выбор). Например, 3–5 вопросов по материалу главы. Задания позволяют закрепить материал и отслеживать понимание.

Такое иерархическое деление «курс → модули → главы → задания» обеспечивает удобную навигацию и постепенное освоение материала.

**Основные пользовательские потоки:**

* **Поток гостя (без регистрации):**

  1. *Главная страница:* Гость видит поле для ввода темы курса и описание сервиса. Ему предлагается попробовать сгенерировать свой курс (демо-режим).
  2. *Генерация структуры:* Пользователь вводит тему, уровень знаний (напр. “начинающий”) и цель обучения. Нажимает “Сгенерировать курс”. Система (ИИ) создает оглавление: список модулей, глав, плюс краткое описание курса (целевое содержание, требования к знаниям).
  3. *Презентация курса (превью):* Гость видит получившийся план курса – оглавление, описание, сколько глав и модулей, пример длительности прохождения. Также указано, что доступна первая глава бесплатно.
  4. *Изучение первой главы:* Гость открывает первую главу (теория) и читает материал. Затем переходит к тесту по этой главе и отвечает на вопросы.
  5. *Ограничение демо:* После прохождения первой главы система предлагает продолжить обучение, но для этого потребуется регистрация (и в перспективе подписка). Гостю показывается призыв зарегистрироваться, чтобы открыть полный курс и сохранять прогресс.
  6. *Регистрация:* Если пользователь заинтересован, он переходит к регистрации (см. поток регистрации ниже).

* **Поток нового пользователя (регистрация):**

  1. Пользователь соглашается продолжить – система предлагает зарегистрироваться. MVP поддерживает быструю регистрацию через соц. аккаунт (Google, Яндекс) или e-mail + пароль. Также возможна авторизация через встроенную форму.
  2. После успешной регистрации/входа пользователь возвращается к тому месту, где остановился (например, ему сразу открывается продолжение курса или следующая глава).
  3. С этого момента прогресс сохраняется: какие главы пройдены, результаты тестов и т.д.
  4. Новому пользователю на бесплатном тарифе доступен ограниченный функционал (например, завершение текущего курса или генерация 1 курса). Для полного доступа предлагается оформить подписку.

* **Поток обучающегося пользователя (после регистрации):**

  * *Продолжение курса:* Авторизованный студент может продолжать проходить ранее начатый курс: открывать последующие главы по порядку, читать теорию, отвечать на тесты. Платформа помечает главы как пройденные после успешного выполнения теста.
  * *Навигация по курсу:* Пользователь в любой момент может открыть оглавление курса, видеть свои отметки о выполнении. Модули и главы могут отмечаться галочками (завершено) или процентом выполнения.
  * *Завершение курса:* Когда все модули и главы пройдены, курс считается завершённым. Возможно, отображается поздравление, процент правильных ответов по курсу и рекомендации (например, другие курсы по теме или следующего уровня).
  * *Выбор других курсов:* Зарегистрированный пользователь имеет доступ к каталогу курсов (см. ниже) – он может в любое время выбрать новый курс для обучения, в том числе сгенерированный другими пользователями, поскольку по умолчанию курсы общедоступны.
  * *Отслеживание прогресса:* В личном кабинете отображается прогресс по всем начатым курсам: сколько % пройдено, последние активности, оценки по тестам.

* **Поток создания нового курса (для пользователя-создателя):**

  1. *Инициация создания:* Пользователь нажимает “Создать курс” (доступно как гостю для демо, так и зарегистрированному в полном объеме). Появляется форма с параметрами генерации: тема курса, уровень знаний аудитории, цели (чему должен научить курс). Опционально можно указать язык (пока русский) и, например, желаемую длину курса (количество часов или уровень детализации).
  2. *Генерация контента:* При отправке формы запускается AI-процесс (через n8n + OpenAI) – создается структура курса (оглавление). Затем автоматически генерируются тексты каждой главы и вопросы для тестов. Процесс может занять от нескольких секунд до пары минут в зависимости от объема – на UI можно показать лоадер и сообщение “Курс генерируется…”.
  3. *Просмотр и редактирование курса:* После генерации пользователь-создатель видит черновик курса. Он может просмотреть содержание глав, убедиться, что курс отвечает запросу. В MVP прямого редактирования текста не будет, но в перспективе (после MVP) планируется дать авторам возможность корректировать сгенерированный контент (поэтому важно хранить связь “пользователь – созданный курс”).
  4. *Сохранение и публикация:* Пользователь сохраняет курс. По умолчанию курс публикуется в общем каталоге, то есть доступен другим пользователям для прохождения. (В дальнейшем можно дать выбор: опубликовать публично или сохранить как приватный черновик).
  5. *Повторное использование:* (Не в MVP, но на будущее) Автор может сгенерировать новый курс на основе существующего – например, углубленную версию или адаптацию. Также планируется возможность клонировать курс для редактирования.

* **Каталог курсов (общедоступный контент):** Все сохраненные курсы формируют библиотеку платформы. Пользователи (включая гостей) могут просматривать каталог: поиск по темам, фильтр по уровню, новизне, популярности. Это повышает ценность платформы, превращая ее не только в генератор, но и в **репозиторий знаний**, где собраны курсы на различные темы. Например, один пользователь создал курс “Основы Python”, другой – “Python для анализа данных” и т.д. Новичок может сразу выбрать из готовых вариантов, а не генерировать с нуля. Каталог поддерживает рейтинг или показатели (сколько прошли, средняя оценка), чтобы отсевать некачественный контент.

* **Роли пользователей и права:**

  * *Студент (обычный пользователь):* Может генерировать курсы, проходить свои и чужие курсы, оставлять отзывы. Имеет свой профиль с прогрессом. В MVP все зарегистрированные пользователи – студенты с точки зрения прав.
  * *Администратор:* Сотрудник платформы, имеющий доступ к админ-панели. Возможности: просматривать список пользователей, курсов, удалять нежелательный контент (например, если сгенерирован спам/ересь), смотреть статистику использования. Админ также управляет тарифами, промо-кодами, контентом справки. Реализация – через стандартную Django admin + дополнительные дашборды при необходимости.
  * *Редактор/модератор:* (планируется в будущем) – отдельная роль для привлечённых экспертов, которые смогут редактировать публичные курсы, улучшать неточности ИИ-контента, объединять дубли тем и т.п. В MVP не реализуется, но в продуктовом видении учитываем необходимость такого качества контроля.

* **UX/UI макеты и дизайн:**

  * Интерфейс должен быть интуитивно понятным и не перегруженным. Особое внимание – учебному экрану главы: удобное чтение текста (хороший шрифт, разбиение на абзацы, подсветка кода если есть), наличие навигации (кнопки “Следующая глава”, “К тесту”).
  * Также важен экран оглавления курса: пользователь должен сразу понять структуру (можно реализовать в виде аккордеона “Модуль -> список глав”).
  * Для демо-режима (гостя) – выделить первую главу как пример, затем модально сообщить о необходимости регистрации.
  * Хотя в рамках ответа мы не можем предоставить реальные макеты, рекомендуется на этапе дизайна создать простые wireframe-модели в инструментах типа Figma или Miro. Например, отрисовать экран создания курса (форма ввода темы и параметров), экран просмотра курса (оглавление слева, содержание справа), экран прохождения теста (вопросы с вариантами и кнопкой ответа).
  * Визуально платформа должна выглядеть современно: используем TailwindCSS для быстрого стилизованного интерфейса, придерживаемся единой цветовой схемы, выделяем интерактивные элементы. Примеры для ориентира – интерфейсы Udemy, Coursera, но упрощённые для MVP.
  * **Адаптивность:** Сразу заложить responsive-дизайн, чтобы пользователи могли проходить курсы и на мобильных устройствах. Возможно, после веб-версии, следующим шагом будет запуск через Telegram-бот или мобильное приложение.

## 3. Техническая архитектура

**Стек технологий (MVP):**

* **Backend:** фреймворк **Django (Python)**. Он обеспечит быстрый старт благодаря встроенной админ-панели, ORM для работы с PostgreSQL и хорошей структуре для реализации REST API при необходимости. Логика генерации, работы с БД, авторизации – всё на Django.
* **База данных:** **PostgreSQL** – надёжная реляционная СУБД, хорошо совместимая с Django. Используем для хранения всех данных: аккаунты, курсы, тексты глав, результаты тестов, подписки и пр. Возможности JSONB пригодятся, если будем хранить какие-то данные в JSON (например, варианты ответов).
* **Frontend:** начально – **HTML5 + TailwindCSS + Vanilla JS** в рамках шаблонов Django. Это позволит быстро сверстать страницы с адаптивным дизайном. TailwindCSS ускорит разработку за счёт готовых утилитарных классов. JS нужен для интерактивности: динамическая навигация по курсу, отправка ответов на тесты без перезагрузки страницы (AJAX).

  * В дальнейшем, когда MVP подтвердит гипотезу, планируется переход на более динамичный фронтенд (например, React) для создания SPA или мобильного приложения. Но для MVP достаточно традиционного подхода, чтобы сэкономить ресурсы разработки.
* **AI интеграция:** внешние AI-сервисы через **n8n**. n8n будет настроен как отдельный сервис (на сервере или в облаке) и связаться с Django через вебхуки/API. С помощью n8n интегрируем:

  * OpenAI API (GPT-4/GPT-3.5) – основной генератор текста.
  * Опционально другие модели (например, возможно подключение отечественных аналогов типа SberCloud API для экономии).
  * n8n также может оркестрировать цепочки (Chain of Thought, если потребуется) и обращаться к базе (в n8n есть PostgreSQL node) – хотя безопаснее, чтобы Django сам писал в БД.
* **Платёжная интеграция:** **ЮKassa (Яндекс.Касса)** для приёма оплат в рублях по подписочной модели. Django через SDK ЮKassa будет создавать платежи, выставлять счета. После успешной оплаты – активация подписки в базе. ЮKassa позволит принимать банковские карты, СБП и т.д., популярные в РФ.
* **Отправка Email:** например, через SMTP или API сервиса (SendGrid/Mailgun) для рассылки писем подтверждения регистрации, уведомлений. Django имеет встроенную поддержку отправки email. Потребуется шаблон письма (например, приветственное письмо новым пользователям, уведомление об оплате или о новых курсах).
* **OAuth авторизация:** встроим вход через Google OAuth2 и Яндекс ID. Используем библиотеку `social-auth-app-django` или аналогичную, которая поддерживает эти провайдеры. Это ускорит процесс входа для пользователей и снизит порог регистрации.
* **Локализация:** весь интерфейс MVP будет на русском (контент тоже генерируется на русском). Django поддерживает i18n, но второй язык не планируется на MVP. Однако, проектируя, не будем хардкодить тексты – заложим возможность переводов на будущее.
* **API:** Пока прямого API-доступа для сторонних клиентов не будет (MVP концентрируется на веб-приложении). В дальнейшем, если появятся клиенты (мобильное приложение, интеграция с LMS компаний), можно будет реализовать REST/GraphQL API. Сейчас достаточно обеспечить чистоту архитектуры, чтобы API было несложно добавить (например, использовать Django REST Framework или FastAPI дополнительным сервисом).

**Основные модули и компоненты системы:**

1. **Модуль аутентификации и управления пользователями:** регистрация, вход, сброс пароля. OAuth2 вход через Google/Яндекс. Хранение профиля пользователя (имя, email, роль, статус подписки).
2. **Модуль генерации курсов:** endpoint или задача, которая получает запрос на генерацию курса. Логика взаимодействия с n8n: отправка параметров, получение сгенерированного контента. Сохранение результата в базу. Этот модуль также включает логику кэширования: проверка, не создавался ли уже похожий курс.
3. **Модуль управления курсами:** CRUD для курсов, модулей, глав, вопросов. В MVP создание курсов происходит автоматом (CRUD через ИИ), но чтение – постоянно. Реализует выдачу списка курсов (каталог), просмотр содержания, прохождение. Сюда же отнесём функционал повторного использования: создание нового курса на базе существующего (в будущем).
4. **Модуль прохождения курса (Learning):** отвечает за UX процесса обучения. Маршруты/вьюхи Django для “начать курс”, “открыть главу”, “отправить ответы на тест”. Управление прогрессом: отметка главы как пройденной, вычисление процентов выполнения.
5. **Модуль тестирования (Quiz):** отображает вопросы, принимает ответы, проверяет правильность. Логика подсчёта результата теста главы (например, верно 4 из 5 вопросов). Может сохранять результат для статистики.
6. **Модуль отслеживания прогресса:** хранит данные о прохождении: какие главы завершены, результаты тестов. Возможно, будет совмещён с моделью “Enrollment/Progress” (см. данные). Этот модуль позволяет возобновлять обучение там, где пользователь остановился.
7. **Модуль подписки и оплаты:** управление тарифами (например, “Free” – ограниченный, “Pro” – платный). Проверка статуса пользователя (например, при попытке сгенерировать 2-й курс – у гостя потребует оплату). Интеграция с ЮKassa: создание платежа, получение webhook’а об успешной оплате, продление подписки.
8. **Модуль администрирования и аналитики:** реализация админ-панели (можно во встроенном Django Admin настроить модели: пользователи, курсы, платежи, и т.д.). Отдельно – возможно, простые страницы статистики: графики регистрации, генерации курсов, активность. Эти инструменты нужны внутренней команде для мониторинга. Возможно, на MVP этапе достаточно выгружать данные из БД и просматривать в сторонних аналитических сервисах, но базовые вещи (кол-во пользователей, список курсов) будут через админку.

**Интеграции:**

* **n8n:** будет работать либо как внешнее SaaS, либо мы развернём self-hosted n8n. Взаимодействие: Django отправляет HTTP запрос к webhook URL n8n для запуска генерации курса, либо n8n опрашивает нашу БД. Предпочтительно – Django инициирует и ждёт (с небольшим таймаутом) ответ. Если генерация очень долгая, можно сделать асинхронно: n8n по завершении дергает наш webhook, а пользователю мы показываем “в процессе”.
* **ЮKassa:** нужны API-ключи, настроить webhook для уведомлений. На стороне Django – модель платежа, куда падает статус “paid” при успешном платеже.
* **Email SMTP/API:** сконфигурировать SMTP (например, Yandex.Mail корпоративный или Mailgun). Django будет слать письма (регистрация, уведомления). Используем Celery или встроенные фоновые задачи, чтобы не тормозить веб-ответ при отправке письма.
* **Хостинг и деплоймент:** MVP планируется развернуть на VPS (виртуальный сервер) под управлением Linux. Можно использовать Docker для контейнеризации:

  * Один контейнер – Django + Gunicorn (WSGI-сервер).
  * Второй – PostgreSQL (либо использовать управляемую базу).
  * Третий – n8n (если self-host).
  * Также контейнер caddy/nginx для раздачи статики и HTTPS.

  Docker-compose облегчит управление. Бюджета \~500 000 руб. должно хватить на инфраструктуру MVP: аренда VPS (или облако типа Yandex Cloud), оплата OpenAI API на первые запросы, домен, почтовый сервис. Возможно, для начала хватит 1-2 VPS (один под основной веб, второй под AI нагрузку).

  Альтернативно, рассмотрим PaaS: например, Railway/Heroku (если не запрещены) или DETA Space для быстрого развёртывания – но учитывая русскоязычную аудиторию, лучше ближе к РФ (для минимальной задержки). Вероятно, размещение в Selectel или Яндекс Облаке.

  **Масштабируемость:** На старте 10k пользователей – нужно планировать возможность масштабирования. Django-приложение можно горизонтально масштабировать (несколько контейнеров за балансировщиком). БД Postgres – возможно понадобятся оптимизации запросов, индексы, но 10k – не большая нагрузка для современного сервера. Основная тяжесть – AI-вызовы, они внешние. Будет крайне важно оптимизировать число запросов к OpenAI (что обусловит кэширование).

  **Безопасность:** Использовать HTTPS для всего (особенно с OAuth и платежами), хранить секреты (API-ключи) вне кода (например, в переменных окружения). Позаботиться о защите от common уязвимостей (Django уже даёт XSS/CSRF защиту). Данные пользователей (почта, пароли) храним безопасно (пароли – хэш + соль). Соблюдать GDPR аналог (законы РФ о персональных данных – хранить данные российских пользователей на серверах в РФ).

## 4. Модели данных

&#x20;*ER-диаграмма основных сущностей и связей базы данных.* На диаграмме показана структура таблиц для хранения пользователей, курсов и связанного контента, а также подписок и результатов (связи многие-к-одному указаны стрелками от дочерней сущности к родительской):

* **User** – таблица пользователей. Атрибуты: `id` (первичный ключ), имя, email, хеш пароля (или внешняя привязка для OAuth), роль (например, “student” или “admin”), дата регистрации, статус подписки. Пользователь может создавать несколько курсов и записываться на несколько курсов.
* **Course** – курсы. Атрибуты: `id`, заголовок, описание, уровень сложности (строка или enum: начальный, средний…), цель обучения (текст), язык (пока ru), флаг публичности (True/False, по умолчанию True – общедоступный). Связь: `created_by` – внешний ключ на User (кто сгенерировал курс). Один пользователь может создать много курсов, у каждого курса один создатель. Также можно хранить `created_at`.
* **Module** – модуль курса. Атрибуты: `id`, заголовок, короткое описание (опционально), порядковый номер (index) в курсе. Связь: `course_id` – FK на Course. Один курс содержит много модулей, каждый модуль относится к одному курсу.
* **Chapter** – глава (урок). Атрибуты: `id`, заголовок, содержимое `content` (текст теории, возможно, достаточно объемный), порядковый номер внутри модуля. Связь: `module_id` – FK на Module. (Через модуль косвенно связано и с Course). Каждая глава принадлежит одному модулю, в модуле много глав. Можно хранить также `summary` (краткое содержание) для оглавления.
* **Question** – тестовый вопрос. Атрибуты: `id`, формулировка вопроса `text`, список вариантов `options` и правильный ответ `correct_answer`. Связь: `chapter_id` – FK на Chapter (предполагаем, что тест привязан к конкретной главе). Один урок может иметь несколько вопросов. Альтернативно, можно иметь сущность Quiz, соединяющую несколько вопросов, но в MVP достаточно связывать вопросы прямо с главой.

  * Поле `options` может хранить варианты, например, как массив или форматированную строку (“A)…, B)…”) – но лучше сделать отдельную таблицу AnswerOption (в диаграмме не показана для упрощения): с полями `id`, текст варианта, флаг `is_correct`, и FK на Question. Но в MVP можно упростить, храня все варианты и правильный в полях Question.
* **Enrollment/Progress** – связь пользователя и курса (прогресс обучения). Атрибуты: `id`, `user_id` (FK на User), `course_id` (FK на Course), прогресс (например, номер последней пройденной главы или процент), статус завершения (булево или дата завершения), оценка/баллы (например, процент правильных ответов по курсу). Эта таблица позволяет понять, какие курсы пользователь проходит или прошёл. Связь “многие-ко-многим” между User и Course через Enrollment: один пользователь может быть зачислен на много курсов, и один курс имеет много учащихся. Первичная уникальность может быть составной (user+course).

  * Также, для более детального отслеживания, можно завести таблицу завершённых глав: например, CompletedChapter (user, chapter, отметка), но это можно вычислять на лету или хранить JSON прогресса. В MVP, возможно, достаточно хранить в Enrollment поле последней пройденной главы.
* **Subscription** – подписка пользователя. Атрибуты: `id`, `user_id` (FK), тип тарифа/плана (например, “Free”, “Pro”, “Enterprise”), дата начала, дата окончания (для платной), активна ли сейчас. Один пользователь может иметь одну активную подписку. История продлений может либо создавать новые записи, либо обновлять существующую (например, менять дату окончания).
* **Payment** – платежи. Атрибуты: `id`, `user_id` (кто платил), сумма, валюта, дата платежа, статус (успешен/отменён), тип (подписка/разовый). Эта таблица нужна для финансового учета и привязана к подпискам. Например, при новом платеже создается запись Payment, и по успешному завершению – обновляется Subscription.

Все связи снабжены каскадным удалением: при удалении курса удаляются его модули, главы, вопросы; при удалении пользователя – возможно, либо запрещаем (чтобы не терять созданные курсы, их можно пометить сиротскими или передать админу), либо также удаляем всё связанное.

Каждая сущность также имеет стандартные поля `created_at`, `updated_at` для отслеживания создания и изменений.

**Примечание по хранилищу контента:** Основное содержание (тексты глав) хранится прямо в БД (TEXT или даже JSONB). Объёмы: один курс может иметь 5–10 глав по \~2–5 тыс. символов – PostgreSQL легко справится с такими размерами. Для масштабов, 1000 курсов × 50k символов = 50 млн символов, что вполне нормально. Но если пойдём в генерирование больших курсов, можно рассмотреть хранение в файловой системе/облачном хранилище (например, генерировать и сохранять как HTML-страницы). Пока в этом нет необходимости – текст в БД даёт нам атомарность и удобство запросов (например, поиск по контенту курса).

**ER-модель и расширение:** Вышеописанная модель близка к классической LMS. В будущем, возможны расширения: таблицы для комментариев/обсуждений, банк вопросов, версии курсов (если редактируются), логирование действий (history). Но для четкого MVP эти сущности избыточны.

## 5. Монетизация и лицензии

**Модель монетизации – подписка (subscription):** Планируется, что доступ к полной функциональности платформы будет предоставляться по подписке (ежемесячной или годовой). Форматы тарифов:

* **Бесплатный план (Free):** Пользователь может протестировать сервис: сгенерировать 1 курс (ограниченное число глав, например до 1 модуля или 1 главы) **или** пройти ограниченную часть существующих курсов (например, 1 курс целиком бесплатно или только первые модули всех курсов). Также гость без регистрации может попробовать демо (первую главу), как описано ранее. Цель free-плана – привлечь пользователей, дать им ценность, после чего мотивировать перейти на платный.
* **Премиум-подписка (Pro):** Платный тариф, открывающий полный доступ:

  * Неограниченная генерация курсов на любые темы.
  * Неограниченный доступ ко всем главам всех курсов из каталога.
  * Возможность сохранять прогресс и получать сертификат (если внедрим) об окончании курса.
  * Приоритетная генерация (меньше ожидания) – если высокая нагрузка на AI, платные пользователи могут получать результат быстрее.
  * Возможно, дополнительные фишки: создание приватных курсов (не публикуя их в общий каталог), скачивание материалов в PDF.

  Цена подписки, ориентировочно, например 500–1000 руб. в месяц (будет определяться исходя из стоимости API и ценности для пользователя). Можно предусмотреть скидку на годовой платеж.
* **Корпоративные тарифы:** В будущем, если появится интерес от организаций (школ, компаний), можно ввести тарифы для команд: несколько пользователей, кастомное брендирование, приоритетная поддержка, white-label опция (см. ниже). Но MVP достаточно иметь индивидуальную подписку.

**Приём оплаты через ЮKassa:** Это позволяет принимать рублевые платежи различными способами. Подписка будет реализована, скорее всего, как регулярные платежи (рекуррентный списания). ЮKassa поддерживает рекуррентные платежи: первый раз пользователь вводит карту, далее каждый месяц списание автоматически. Необходимо разработать пользовательский интерфейс для оформления подписки:

* Страница “Ваш тариф”: показывает текущий статус (например, “Free” или “Pro до 01.12.2025”).
* Возможность привязать карту и оплатить подписку. ЮKassa переадресует на платежную форму, после успешной оплаты – возвращает на наш сайт.
* Вебхук от ЮKassa об успешной транзакции – в обработчике переводим пользователя на Pro, устанавливаем дату следующего платежа.
* Отказ от подписки – пользователь может отменить автопродление (тогда мы останавливаем рекурренты). Пока MVP может обойтись без автоматической отмены через сайт – достаточно инструкции “напишите в поддержку для отмены”, но лучше сразу сделать кнопку.

**Права на контент и лицензирование курсов:** Поскольку контент генерируется ИИ на платформе, предлагаем, что **права на сгенерированный курс принадлежат платформе** (точнее, компании-владельцу). Пользователь-создатель в данном случае выступает инициатором генерации, но не автором контента в классическом смысле. Это важно для юридической ясности:

* Платформа может свободно использовать, публиковать курсы, **предоставлять доступ другим пользователям**. Это указано в пользовательском соглашении.
* Создатель курса не может требовать эксклюзивности или удаления (кроме случаев нарушения правил).

С другой стороны, платформе следует позволять создателю курса **редактировать и улучшать** свой курс (в будущем), тем самым становясь соавтором – эти моменты стоит отразить в условиях использования.

Вопрос авторских прав на AI-контент пока в серой зоне, но обычно в условиях можно прописать, что пользователь дает согласие, что сгенерированный контент не эксклюзивен пользователю.

* **Открытость курсов:** По умолчанию курсы публичны (если пользователь не выбрал иное). Это значит любой зарегистрированный (или даже гость, если есть free-доступ) может их пройти. Для пользователей это обмен: они получают контент, сгенерированный другими, взамен не возражают, что их контент тоже доступен всем. (Аналогия – открытая библиотека курсов).

  * Возможность **приватного курса**: может быть реализована позже как опция, возможно за отдельную плату или на высоком тарифе. Приватный курс виден только его создателю или тем, кому он явно открыл доступ. Это нужно, например, если преподаватель сгенерировал курс для своего класса и не хочет публиковать его всему миру. В MVP эту функцию можно не делать, но учитывать в модели (поле `public_flag`).

* **White-label решение:** Пока ответа на этот вопрос нет (не планируется в MVP). White-label означало бы, что, например, вуз или компания получает отдельный экземпляр платформы под своим брендом, со своим доменом, куда могут заходить только их студенты. Это можно монетизировать как enterprise-версию (за годовую плату). Если такая модель появится, нужно будет проработать: мультитенантность системы, возможность оформления под клиента, и как лицензировать (вероятно, SaaS для B2B). На этапе MVP мы концентрируемся на B2C подписке. Однако, в видении продукта можно указать, что платформа потенциально может стать основой для кастомных решений в области онлайн-обучения – это расширяет рынок.

* **Правила использования и контент:** Необходимо подготовить Пользовательское соглашение и Политику конфиденциальности. В них:

  * Запретить загружать/публиковать запрещённый контент (например, если пользователь редактирует главы в будущем).
  * Указать отказ от ответственности: контент генерируется автоматически, **может содержать ошибки**, и платформа не гарантирует 100% точность знаний. Пользователь должен использовать информацию с осторожностью. (В то же время, будем стремиться к высокому качеству).
  * Прописать, что никаких сертификатов гос.образца пока не выдаётся (чтобы не было заблуждения, что это аккредитованные курсы).
  * Лицензия на использование платформы – стандартная (пользователь получает ограниченное право пользования сервисом).
  * Политика возврата средств за подписку (например, пропорционально неиспользованному времени или нет возврата, если уже воспользовался).

**Платёжные интеграции:** MVP – только ЮKassa (т.к. российская аудитория). Альтернативы/дополнения на будущее:

* Stripe / PayPal – для иностранных пользователей, если будем выходить на другие рынки.
* Встроенные платежи в VK, Сбербанк – если решим распространять через их экосистемы.
* Мобильные приложения – если появятся, то In-App Purchases (Apple/Google Pay).

Но всё это позже. Также, нужно учесть налогообложение (если физлицо, то самозанятый/ИП, включать ли НДС в цену и т.д.).


## 6. Техническое задание на MVP и план работ

На основе вышеописанного видения сформируем конкретный план реализации минимально жизнеспособного продукта (MVP). MVP должен включать ключевые фичи: генерация курса (текст + тесты), регистрация/авторизация, отслеживание прогресса обучения и базовая монетизация (подписка). Ниже перечислены основные задачи и этапы разработки:

**8.1. Функциональные требования MVP:**

1. **Генерация курсов с помощью ИИ:**

   * Реализовать форму ввода параметров курса (тема, уровень, цели).
   * Обработчик на бэкенде, запускающий процесс генерации через n8n + OpenAI.
   * Сохранение сгенерированной структуры курса, глав и вопросов в базу данных.
   * Отображение результата пользователю: страница нового курса с оглавлением, возможностью просмотреть главы.
   * Ограничение для незарегистрированных: доступна только первая глава (остальные замаскированы или помечены замком).
   * **Кэширование:** если пользователь запрашивает генерацию идентичного курса, можно выдать уже существующий (опционально, если успеем; можно отложить).
   * Обработка ошибок AI: если API не ответил или сгенерировал ерунду – сообщить пользователю о неудаче и предложить повторить.
2. **Регистрация и авторизация пользователей:**

   * Форма регистрации (email, пароль) + вход.
   * Интеграция OAuth: кнопки “Войти через Google”, “Войти через Yandex”. Настроить соответствующие OAuth-клиенты.
   * Подтверждение email (необязательно для MVP, но желательно – можно отложить, чтобы не усложнять; либо сделать упрощённо без подтверждения).
   * Страница профиля пользователя: отображает имя/email, статус подписки, список начатых курсов (если есть).
   * Возможность выхода, сброса пароля (через email ссылку).
3. **Функционал обучения (LMS):**

   * Страница просмотра курса (Course Detail): оглавление модулей/глав, описание курса.
   * Страница главы: отображает теоретический текст. Кнопки “далее” и “к тесту”.
   * Страница теста по главе: выводит вопросы (радио или чекбоксы). Пользователь отмечает ответы и отправляет.
   * Проверка ответов: показываем результат (сколько правильных) и разъясняем правильные (в MVP можно просто выделить зеленым правильные после отправки).
   * Сохранение прогресса: после успешного прохождения теста главы помечаем ее как завершённую для данного пользователя.
   * Возможность продолжить курс: после главы кнопка “следующая глава” (или возвращаемся к оглавлению, где следующая открывается).
   * Блокировка следующей главы, если предыдущая не пройдена? – Можно в MVP не строго блокировать, но желательно последовательное прохождение. Реализуем: неактивная кнопка “следующая” пока тест не сдан.
   * Отображение прогресса: на странице курса показывать, какие модули и главы завершены (например, иконкой).
   * Завершение курса: если все главы пройдены, пометить курс как завершённый, возможно, поздравление или показатель успеха.
4. **Каталог курсов:**

   * Страница со списком всех сгенерированных курсов (публичных). Можно отсортировать по дате создания или популярности.
   * Поиск по названию темы.
   * Каждый элемент списка: название курса, автор (или пометка “AI”), краткое описание, кол-во модулей/глав, кнопка “Начать курс”.
   * Гостям разрешено просматривать каталог, но при попытке начать курс – показывать ту же механику демо (одна глава без регистрации).
5. **Связь пользователь–курс (Enrollment):**

   * Когда зарегистрированный пользователь открывает курс, которого он ещё не начинал, создаём запись об “зачислении” (enrollment) с 0% прогресса.
   * Обновляем прогресс по мере прохождения.
   * В профиле пользователя – список курсов, на которые он “зачислен”, с прогрессом. (Может быть простой список ссылок с процентом).
   * Гость, начав демо, должен после регистрации “принять” курс – то есть привязать прогресс. Можно реализовать: при демо генерируем курс без пользователя, после регистрации – связываем его с новым аккаунтом.
6. **Оплата и подписка:**

   * Ограничить возможности бесплатного пользователя: например, разрешить создать только 1 курс и пройти не более 1 курса из каталога. Или разрешить генерировать до 1 модуля (упрощенно). Конкретно: после генерации первого курса – при повторной попытке выдать сообщение “оформите подписку для неограниченных курсов”.
   * Страница “Подписка”: описать преимущества Pro, кнопка “Оформить подписку”.
   * Интеграция ЮKassa: при нажатии – создаётся платеж, переадресация. После успешной оплаты – обновление модели подписки пользователя (статус Pro, срок до +1 месяц).
   * Если не удачно – сообщение об ошибке или отмене.
   * Учёт автоплатежей можно пока не делать (просто делаем месячную подписку и вручную продлевать).
   * Админ-интерфейс: видеть список подписок, платежей.
7. **Админ-панель:**

   * Настроить Django Admin для всех основных моделей (User, Course, Module, Chapter, Question, Enrollment, Payment, Subscription).
   * Ограничить доступ администратора (по роли).
   * Админ может вручную: просматривать содержимое курсов (проверять на нежелательный контент), удалять курсы или пользователей при нарушениях.
   * Отчёты: можно сделать просто – раздел “Статистика” в админке с агрегатами (число пользователей, курсов, запросов за день). Либо подключить django-extensions и сделать SQL dashboard.
   * Логи ошибок – подключить Sentry (необязательно, но в боевом MVP желательно, чтобы ловить исключения).

**8.2. План работ (этапы разработки):**

Разделим разработку MVP на этапы с примерной последовательностью:

* **Этап 0: Подготовка окружения.**

  * Настройка репозитория (Git).
  * Базовая конфигурация Django-проекта.
  * Создание моделей БД на основе ERD (миграции).
  * Подключение PostgreSQL (локально для разработки).
  * Развёртывание n8n и тестовое подключение к OpenAI (проверить, что можем вызывать модель).

* **Этап 1: Базовый функционал пользователей.**

  * Реализовать регистрацию/логин через Django (встроенные механизмы).
  * Подключить OAuth (Google, Yandex) – получить API ключи, настроить redirect URI, протестировать вход.
  * Создать шаблоны страниц: регистрация, логин, профиль.
  * Настроить отправку email (например, письмо приветствия или подтверждения) – можно отложить подтверждение email, но SMTP настроить.
  * Внедрить разграничение доступа: страницы генерации и обучения доступны гостям частично (с проверками).

* **Этап 2: Генерация курса (backend + n8n).**

  * Создать Django view “generate\_course” (POST) для приема параметров.
  * В n8n настроить workflow:

    1. Webhook старт → 2. Функция формирует prompt для оглавления → 3. HTTP-запрос к OpenAI → 4. Разбор ответа (получение списка модулей/глав).
    2. Затем, например, For Each модуль/глава: запрос к OpenAI для текста главы; аналогично для вопросов.
    3. Собрать всё в JSON и вернуть в ответ вебхука.
  * В Django дождаться ответа и сохранить данные в модели (Course, Module, Chapter, Question).
  * Если ожидание слишком долгое (более 30 сек), можно сделать генерацию асинхронно: сразу вернуть пользователю страницу “курс создается”, а генерация в фоне, потом уведомление. Но MVP можно попытаться синхронно, если уложиться \~10-20 секунд на курс.
  * Сделать страничку фронтенда: форма + JS, чтобы при сабмите вызывать API и получать результат (AJAX) либо через редирект после генерации.
  * Покрыть кейсы неудачи: OpenAI error → сообщить “Не удалось сгенерировать, попробуйте снова”.

* **Этап 3: Отображение и прохождение курса.**

  * Страница списка курсов (каталог) – базовый шаблон, выборка из Course.objects.all().
  * Страница курса (оглавление): написать вьюху, выводящую структуру (модули, главы) из связанных моделей; отметить, какие главы доступны (для гостя – только первая).
  * Страница главы: вывод `chapter.content` безопасно (экранировать HTML если есть). Разбить на параграфы/списки – контент уже должен быть отформатирован (может быть markdown, можно применить markdown->HTML).
  * Если глава не доступна (гость без регистрации на 2-й главе) – перенаправить на регистрацию.
  * Страница теста: вывести `chapter.question_set` – список вопросов, каждый с формой (input type radio/checkbox). Возможно, с помощью формы Django или вручную.
  * Обработка отправки ответов: собрать ответы, сравнить с `correct_answer`. Сохранить результат (например, в модель Progress отметку, что глава пройдена, и % правильных).
  * Дать пользователю фидбэк: “Вы верно ответили на 3 из 4 вопросов” – если критерий прохождения, скажем 75% верно, то засчитать главу выполненной. Критерий можно пока простой: все вопросы должны быть правильно (или хотя бы 80%).
  * После теста, если пройдено, разблокировать следующую главу: на странице результатов дать кнопку “Следующая глава”.
  * Обновить прогресс в БД: Progress.last\_chapter = текущая глава, и флаг completed модуль/курс если достигнут конец.
  * Дополнительно: возможность пересдать тест? (MVP можно позволить перезаполнить, но лучше считать – не прошел, попробуй ещё раз).

* **Этап 4: Монетизация и ограничения.**

  * Имплементировать логику ограничения free-пользователя:

    * В момент генерации нового курса проверить: если пользователь free и уже превысил лимит (>=1 курс создан) – не позволять, а редиректить на страницу оплаты.
    * В момент открытия курса из каталога: если free-пользователь уже завершил свой бесплатный лимит (напр. 1 курс полностью), то при попытке второго курса – требовать подписку.
    * Либо более простой подход: без подписки показывать только первые X модулей любого курса. Но т.к. структура непредсказуема, лучше лимит на кол-во курсов.
  * Создать модель Subscription и Payment, методы активации.
  * Реализовать страницу “Оплата”: генерировать платёж через ЮKassa API. Это, наверное, отдельный модуль: отправить запрос на создание платежа (сумма, описание, return\_url), получить payment\_url.
  * Редирект пользователя на payment\_url (ЮKassa страница).
  * Создать view для приёма уведомления (callback) от ЮKassa о платеже (нужен ендпоинт, куда Яндекс пошлёт HTTP запрос). Проверяем секрет, находим Payment запись, ставим статус “paid”.
  * При получении success – обновить Subscription пользователя: установить дату окончания через +30 дней, статус активен.
  * В интерфейсе: отлавливать возвращение пользователя (ЮKassa вернёт на наш success URL, можно там показать “оплата успешна, ваша подписка активна”).
  * Тестировать на тестовых параметрах.

* **Этап 5: Тестирование и отладка:**

  * Проиграть все сценарии руками: генерация курса (разных тем), прохождение глав, регистрация, граничные случаи (не ответил на тест, вышел и зашел снова – сохраняется ли прогресс).
  * Исправить баги, особенно следить за состояниями подписки и доступов.
  * Оптимизировать производительность: например, добавить индексы на часто запрашиваемые поля (user\_id, course\_id in Enrollment), но на малых данных это не критично.
  * Безопасность: проверить, что автор одного курса не может через URL получить доступ к чужому приватному (если появится приватность), что гость не может API-вызовом вытянуть все главы (можно в контроллере проверять права).

* **Этап 6: Деплой:**

  * Подготовить Dockerfile и docker-compose. Проверить, что образы собираются.
  * Настроить сервер: база, окружение, запустить контейнеры.
  * Провести миграции на проде, создать суперпользователя для админки.
  * Настроить домен, сертификаты HTTPS (например, LetsEncrypt).
  * Проверить, что OAuth callbacks работают на продомене.
  * Настроить фоновые задачи (если есть, например Celery, но тут может не понадобиться).
  * Настроить мониторинг (Sentry, Метрика).

* **Этап 7: Пост-реализационные задачи (можно параллельно с отзывами):**

  * Собирать ранний фидбэк от пользователей, возможно оперативно фиксить проблемы с качеством генерации (подправить prompt’ы).
  * Подготовить контент справки: “Как пользоваться”, FAQ (например, что делать если курс плохой, как отменить подписку).
  * Планировать следующую итерацию: добавление редактирования курсов, мобильная версия, и т.д. – исходя из того, что покажет MVP.