# –°–≤–æ–¥–∫–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ Redis –≤ –ø—Ä–æ–µ–∫—Ç AI Akademiya

## üéØ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏

### ‚úÖ 1. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ Redis –≤ Docker Compose
- –î–æ–±–∞–≤–ª–µ–Ω —Å–µ—Ä–≤–∏—Å `redis` –≤ `docker-compose.yml`
- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è: Redis 7 Alpine, 512MB –ø–∞–º—è—Ç—å, LRU –ø–æ–ª–∏—Ç–∏–∫–∞
- –ü–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ AOF
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Django —Å–µ—Ä–≤–∏—Å–æ–º

### ‚úÖ 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Django –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Redis
- –û–±–Ω–æ–≤–ª–µ–Ω—ã –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –≤ `requirements.txt`:
  - `redis==5.2.0`
  - `django-redis==5.4.0` 
  - `django-ratelimit==4.1.0`
- –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã –∫–µ—à –∏ —Å–µ—Å—Å–∏–∏ –≤ `settings.py`
- –î–æ–±–∞–≤–ª–µ–Ω—ã middleware –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

### ‚úÖ 3. –°–æ–∑–¥–∞–Ω–∏–µ —É—Ç–∏–ª–∏—Ç –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Redis
**–§–∞–π–ª**: `aikademiya/core/redis_utils.py`
- `RedisCache` - –±–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∫–µ—à–µ–º
- `CourseCache` - —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∫—É—Ä—Å–æ–≤
- `UserCache` - –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö
- `APICache` - –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ API –æ—Ç–≤–µ—Ç–æ–≤
- `GenerationCache` - –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫—É—Ä—Å–æ–≤

### ‚úÖ 4. –î–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã –¥–ª—è –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è
**–§–∞–π–ª**: `aikademiya/core/decorators.py`
- `@cache_api_response` - –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ API –æ—Ç–≤–µ—Ç–æ–≤
- `@cache_course_data` - –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∫—É—Ä—Å–æ–≤
- `@cache_user_data` - –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö
- `@invalidate_course_cache` - –æ—á–∏—Å—Ç–∫–∞ –∫–µ—à–∞ –∫—É—Ä—Å–æ–≤
- `@invalidate_user_cache` - –æ—á–∏—Å—Ç–∫–∞ –∫–µ—à–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- Rate limiting –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã

### ‚úÖ 5. Middleware –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
**–§–∞–π–ª**: `aikademiya/core/middleware.py`
- `CacheStatsMiddleware` - —Å–±–æ—Ä —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –∫–µ—à–∞
- `RedisHealthCheckMiddleware` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ Redis
- `CacheHeadersMiddleware` - –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è

### ‚úÖ 6. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ –∫–µ—à–∞
**–§–∞–π–ª**: `aikademiya/core/signals.py`
- –°–∏–≥–Ω–∞–ª—ã Django –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –æ—á–∏—Å—Ç–∫–∏ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏:
  - –ö—É—Ä—Å–æ–≤ –∏ –∏—Ö –º–æ–¥—É–ª–µ–π/–≥–ª–∞–≤
  - –ü—Ä–æ—Ñ–∏–ª–µ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
  - –ö–∞—Ç–µ–≥–æ—Ä–∏–π –∫—É—Ä—Å–æ–≤
  - –ü—Ä–æ–≥—Ä–µ—Å—Å–∞ –æ–±—É—á–µ–Ω–∏—è

### ‚úÖ 7. –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è –≤ API
**–û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã**:
- `aikademiya/courses/api_views.py` - –¥–æ–±–∞–≤–ª–µ–Ω–æ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∫—É—Ä—Å–æ–≤
- `aikademiya/users/api_views.py` - –¥–æ–±–∞–≤–ª–µ–Ω–æ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

**–ß—Ç–æ –∫–µ—à–∏—Ä—É–µ—Ç—Å—è**:
- –°–ø–∏—Å–æ–∫ –∫—É—Ä—Å–æ–≤ (10 –º–∏–Ω)
- –î–µ—Ç–∞–ª–∏ –∫—É—Ä—Å–∞ —Å –º–æ–¥—É–ª—è–º–∏ (30 –º–∏–Ω)
- –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –∫—É—Ä—Å–æ–≤ (30 –º–∏–Ω)
- –ü—Ä–æ—Ñ–∏–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (15 –º–∏–Ω)
- –°—Ç–∞—Ç—É—Å—ã –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ (1-2 —á–∞—Å–∞)

### ‚úÖ 8. –ö–æ–º–∞–Ω–¥—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
**–§–∞–π–ª**: `aikademiya/core/management/commands/clear_cache.py`
```bash
python manage.py clear_cache --stats     # –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
python manage.py clear_cache --all       # –û—á–∏—Å—Ç–∏—Ç—å –≤–µ—Å—å –∫–µ—à
python manage.py clear_cache --pattern "course:*"  # –ü–æ –ø–∞—Ç—Ç–µ—Ä–Ω—É
```

### ‚úÖ 9. –ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
**–§–∞–π–ª—ã**: 
- `aikademiya/core/admin.py` - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ Django Admin
- `templates/admin/redis_stats.html` - HTML –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

**–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏**:
- –ü—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ Redis
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø–∞–º—è—Ç–∏ –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–µ—à–µ–º (–æ—á–∏—Å—Ç–∫–∞)
- Hit/Miss ratio
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–ª—é—á–µ–π

### ‚úÖ 10. Rate Limiting
**–ù–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –ª–∏–º–∏—Ç—ã**:
- API –∑–∞–ø—Ä–æ—Å—ã: 100/—á–∞—Å —Å IP
- –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è: 20/—á–∞—Å —Å IP
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫—É—Ä—Å–æ–≤: 10/—á–∞—Å –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –°–º–µ–Ω–∞ –ø–∞—Ä–æ–ª—è: 20/—á–∞—Å —Å IP

### ‚úÖ 11. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
**–§–∞–π–ª—ã**:
- `docs/redis-integration.md` - –ø–æ–ª–Ω–∞—è —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- `README-Redis.md` - –±—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç –∏ –æ—Å–Ω–æ–≤—ã

## üöÄ –ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å

```bash
# 1. –ü–æ–¥–Ω—è—Ç—å –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã
docker-compose up -d

# 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Redis
docker-compose ps redis
docker-compose logs redis

# 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ
curl http://localhost:8000/api/categories/

# 4. –ê–¥–º–∏–Ω–∫–∞ Redis
# http://localhost:8000/admin/redis-stats/
```

## üìä –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- ‚ö° **–£—Å–∫–æ—Ä–µ–Ω–∏–µ API** –≤ 3-10 —Ä–∞–∑ –¥–ª—è –∫–µ—à–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- üéØ **–°–Ω–∏–∂–µ–Ω–∏–µ –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ –ë–î** –Ω–∞ 60-80%
- üìà **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å** - –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –≤—ã—Å–æ–∫–∏–º –Ω–∞–≥—Ä—É–∑–∫–∞–º

### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –æ–ø—ã—Ç
- üöÄ **–ë—ã—Å—Ç—Ä–∞—è –∑–∞–≥—Ä—É–∑–∫–∞** –∫—É—Ä—Å–æ–≤ –∏ –ø—Ä–æ—Ñ–∏–ª–µ–π
- üíæ **–°–µ—Å—Å–∏–∏ –≤ Redis** - –ª—É—á—à–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- üõ°Ô∏è **–ó–∞—â–∏—Ç–∞ –æ—Ç —Å–ø–∞–º–∞** —á–µ—Ä–µ–∑ rate limiting

### –û–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞
- üì± **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- üîß **–ì–∏–±–∫–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ** –∫–µ—à–µ–º
- üìä **–ú–µ—Ç—Ä–∏–∫–∏** –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- üõ†Ô∏è **–ì–æ—Ç–æ–≤—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã** –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è
- **Cache-Aside** –ø–∞—Ç—Ç–µ—Ä–Ω –¥–ª—è –æ—Å–Ω–æ–≤–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- **Write-Through** –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è** —á–µ—Ä–µ–∑ —Å–∏–≥–Ω–∞–ª—ã Django

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Redis
- **–ü–∞–º—è—Ç—å**: 512MB —Å LRU –ø–æ–ª–∏—Ç–∏–∫–æ–π
- **–ü–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å**: AOF –¥–ª—è –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏
- **–°–µ—Ç—å**: –ò–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–∞—è Docker —Å–µ—Ç—å
- **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**: –í—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- Rate limiting –¥–ª—è –∑–∞—â–∏—Ç—ã API
- –ò–∑–æ–ª—è—Ü–∏—è Redis –≤ Docker —Å–µ—Ç–∏
- –í–∞–ª–∏–¥–∞—Ü–∏—è –∫–ª—é—á–µ–π –∫–µ—à–∞
- Graceful degradation –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ Redis

## üìà –ú–µ—Ç—Ä–∏–∫–∏ —É—Å–ø–µ—Ö–∞

–ü–æ—Å–ª–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –æ–∂–∏–¥–∞–µ—Ç—Å—è:
- **Hit Rate > 80%** –¥–ª—è —á–∞—Å—Ç–æ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- **–í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ API < 100ms** –¥–ª—è –∫–µ—à–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- **–°–Ω–∏–∂–µ–Ω–∏–µ –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ –ë–î** –≤ 2-5 —Ä–∞–∑
- **–ó–∞—â–∏—Ç–∞ –æ—Ç DDoS** —á–µ—Ä–µ–∑ rate limiting

## üéâ –ì–æ—Ç–æ–≤–æ –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É

–°–∏—Å—Ç–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤–∞ –∫ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é —Å:
- ‚úÖ –ü–æ–ª–Ω—ã–º –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–æ–º
- ‚úÖ –ì–∏–±–∫–∏–º —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ–º
- ‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ –ø—Ä–æ—Ü–µ–¥—É—Ä–∞–º–∏
- ‚úÖ –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

---

**–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è Redis –∑–∞–≤–µ—Ä—à–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ!** üéä

–ü—Ä–æ–µ–∫—Ç —Ç–µ–ø–µ—Ä—å –æ–±–ª–∞–¥–∞–µ—Ç —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º–æ–π –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è, –≥–æ—Ç–æ–≤–æ–π –∫ –≤—ã—Å–æ–∫–∏–º –Ω–∞–≥—Ä—É–∑–∫–∞–º –∏ –ø—Ä–æ–¥–∞–∫—à–µ–Ω-–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é.